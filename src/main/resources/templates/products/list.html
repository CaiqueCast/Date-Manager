<head>
    <style>
        /* RESET */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: system-ui, sans-serif;
            background: #f7f7f7;
            color: #333;
            font-size: 16px;
        }

        /* APP WRAPPER */
        .todo-app {
            display: flex;
            flex-direction: column;
            width: 100%;
            min-height: 100vh;
            background: #E7EAFB;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin: 0 auto;
        }

        /* HEADER */
        .app-header {
            background: #2a2eab;
            color: #fff;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .app-header h1 {
            font-size: 3.5rem;
        }

        .app-header h1 a {
            color: inherit;
            text-decoration: none;
        }

        /* BARRA DE BUSCA */
        .search-bar {
            background: #ece6f0;
            border-radius: 20px;
            padding: 0.5rem 1rem;
            margin: 0.5rem 1rem;
            display: flex;
            gap: 8px;
        }

        .search-bar button,
        .search-bar a {
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 3rem;
            padding: 0.3rem 0.6rem;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: #333;
        }

        .search-bar input {
            border: none;
            background: transparent;
            outline: none;
            width: 100%;
            font-size: 3rem;
        }

        /* LISTA */
        .todo-list {
            flex: 1;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .todo-item {
            background: #fff;
            border-radius: 12px;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }

        /* ---- ESTILOS DE ALERTA ---- */
        .todo-item.sessenta {
            background-color: #ffd21e;
            color: #000;
        }

        .todo-item.trinta {
            background-color: #f87f29;
            color: #000;
        }

        .todo-item.sete {
            background-color: #fc5252;
            color: #000;
        }

        .todo-item.vencido {
            background-color: #dd1818;
            color: #000;
        }

        /* INFO */
        .todo-info {
            display: flex;
            flex-direction: column;
        }

        .todo-info h3 {
            font-size: 3rem;
            color: #200092;
        }

        .todo-info p {
            font-size: 2rem;
            color: #000;
        }

        /* A√á√ïES */
        .todo-actions {
            display: flex;
            gap: 0.5rem;
        }

        .todo-actions button,
        .todo-actions a {
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 3rem;
            color: #2a2eab;
            text-decoration: none;
        }

        .todo-actions .danger {
            color: #dc2626;
        }

        /* BOT√ÉO FLUTUANTE */
        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 75px;
            height: 75px;
            border-radius: 50%;
            background: #9395d3;
            color: #fff;
            font-size: 5rem;
            border: none;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            cursor: pointer;
        }


        /* NAV BAR INFERIOR */
        .bottom-nav {
            background: #fff;
            padding: 0.8rem;
            border-top: 1px solid #ddd;
            display: flex;
            justify-content: space-around;
        }

        .bottom-nav a {
            border: none;
            background: transparent;
            font-size: 2rem;
            cursor: pointer;
            color: #333;
            text-decoration: none;
        }

        /* RESPONSIVIDADE */
        @media (min-width: 767px) {
            .todo-app {
                max-width: 100% !important;
                min-height: 100%;
                width: 100% !important;
                border-radius: 0;
                box-shadow: none;
            }
        }

        @media (min-width: 768px) and (max-width: 1023px) {
            .todo-app {
                max-width: 800px;
            }
        }

        @media (min-width: 1024px) {
            .todo-app {
                max-width: 1200px;
            }
            body { font-size: 18px; }
            .app-header h1 { font-size: 1.9rem; }
            .todo-info h3 { font-size: 1.3rem; }
            .todo-info p { font-size: 1rem; }
        }
    </style>
</head>

<div th:fragment="content" class="todo-app">
    <header class="app-header">
        <h1><a th:href="@{/products}">Produtos</a></h1>
    </header>

    <!-- Barra de busca -->
    <form th:action="@{/products}" method="get" class="search-bar">
        <input type="text" name="q" th:value="${q}" placeholder="Buscar por nome ou c√≥digo de barras" />
        <button type="submit">üîç</button>
        <a th:href="@{/products}">‚ùå</a>
    </form>

    <!-- Lista de produtos -->
    <div class="todo-list">
        <div th:each="p : ${products}"
             th:class="'todo-item ' + (${p.daysUntilExpiration} < 0 ? 'vencido' : (${p.daysUntilExpiration} <= 7 ? 'sete' : (${p.daysUntilExpiration} <= 30 ? 'trinta' : (${p.daysUntilExpiration} <= 60 ? 'sessenta' : ''))))">
            <div class="todo-info">
                <h3 th:text="${p.name}">Nome</h3>
                <p th:text="${p.barcode}">7890000000000</p>
                <p th:text="${#temporals.format(p.validity, 'dd/MM/yyyy')}">??/??/????</p>
                <p>
                    <span th:if="${p.daysUntilExpiration < 0}" style="color:#fff;">Vencido</span>
                    <span th:if="${p.daysUntilExpiration >= 0}"
                          th:text="${p.daysUntilExpiration} + ' dia' + (${p.daysUntilExpiration}==1 ? '' : 's')"></span>
                </p>
            </div>
            <div class="todo-actions">
                <a th:href="@{|/products/${p.id}/edit|}">‚úèÔ∏è</a>
                <form class="inline" th:action="@{|/products/${p.id}/delete|}" method="post"
                      onsubmit="return confirm('Excluir este produto?');">
                    <button class="danger" type="submit">üóëÔ∏è</button>
                </form>
            </div>
        </div>

        <div th:if="${#lists.isEmpty(products)}" class="todo-item">
            <div class="todo-info">
                <h3>Nenhum produto encontrado.</h3>
            </div>
        </div>
    </div>

    <!-- Bot√£o flutuante -->
    <a th:href="@{/products/new}" class="fab">
        <img src="/images/bottomNew.png" alt="Adicionar" />
    </a>

    <!-- Filtros -->
    <div class="bottom-nav">
        <a th:href="@{/products(filter='1m')}">1 m√™s</a>
        <a th:href="@{/products(filter='2m')}">2 meses</a>
    </div>
</div>
